# Правила подготовки документации (локальные источники)

## Назначение
Описывает, как писать материалы Docara исключительно на основе локальных файлов `source/*`. Фиксирует порядок поиска данных, формат кода и ключевые файлы, откуда брать структуры, тексты и сниппеты.

## Где применяется
Документация SF4 (уровень ядра, слоя сайта и компонентов), работа с гридом/блоками, любые страницы Docara, где нужны примеры и точные пути.

## Где находится
- Карта файлов `source/`: `source/index.md`.
- Инструкция по работе с локальными файлами: `source/code_retrieval_guidelines.md`.

## Требования
- Сначала искать ответы в локальных файлах; при отсутствии — явно сообщать, чего не хватает (`source/code_retrieval_guidelines.md`).
- Использовать точные пути и содержимое из `source/structure.json`, `content.json`, реестров грида/блоков.
- Примеры кода оформлять по PSR-12, с `declare(strict_types=1)`; булевы значения — `'Y'/'N'` (`source/code_retrieval_guidelines.md`).

## Как это работает
1. Открыть `source/index.md`, чтобы увидеть, какой файл отвечает за нужную подсистему.
2. Искать данные в профильных файлах (`grid.md`, `sf_grid.json`, `view.json`, `block.json`, слепки модулей) — порядок указан в инструкции.
3. Для кода брать готовые фрагменты из `source/content.json[path].content`; если файла нет — сообщать о его отсутствии.
4. Выводить примеры в формате PSR-12, используя типы и значения, оговорённые в правилах.

## Настройка и параметры
| Правило | Описание | Источник |
| --- | --- | --- |
| Порядок поиска | «Сначала локальные файлы, затем знания по SF4; если файла нет — сообщаем» | `source/code_retrieval_guidelines.md` |
| Где искать структуру | `structure.json` → путь; `content.json` → готовый код | `source/code_retrieval_guidelines.md` |
| Формат кода | PSR-12, `declare(strict_types=1)`, булевы `'Y'/'N'`, массивы `[]` | `source/code_retrieval_guidelines.md` |
| Навигатор файлов | Перечень ключевых файлов в `source/` | `source/index.md` |

## Примеры из репозитория
Источник: `source/code_retrieval_guidelines.md`
```md
## Общая политика
1) Сначала ищем ответ в **локальных файлах**, затем в знаниях по SF4.  
2) Если нужного файла нет — явно сообщаем, какого не хватает.
```

Источник: `source/code_retrieval_guidelines.md`
```md
## Правила вывода кода
- Всегда **PSR‑12** и `declare(strict_types=1)`.
- Булевы → `'Y'/'N'`; числа → строками; множественные параметры → **PHP‑массивами**.
- Готовые сниппеты указывать с реальными путями из `structure.json`.
```

## Типичные ошибки и диагностика
- Использование внешних знаний вместо локальных файлов → вернуться к порядку поиска и назвать отсутствующий файл.
- Форматирование примеров без `declare(strict_types=1)` или не в PSR-12 → свериться с блоком «Правила вывода кода».
- Ссылка на несуществующий путь → проверить `source/structure.json`.

## Что должен уметь читатель после
- Определять нужный файл `source/*` для любой темы.
- Брать подтверждённые пути и код из `structure.json`/`content.json`.
- Форматировать примеры по правилам PSR-12 и обозначать отсутствующие данные.

## Источники истины
- `source/code_retrieval_guidelines.md`
- `source/index.md`
