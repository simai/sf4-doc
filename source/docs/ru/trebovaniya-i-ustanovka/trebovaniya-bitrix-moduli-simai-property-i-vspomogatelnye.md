# Платформа: Bitrix (D7), редакция «Старт», инфоблоки и HL-блоки

SIMAI Framework 4 (SF4) работает как надстройка над 1С-Битрикс и опирается на D7-подход: модули, события, классы ядра и стандартные механизмы Bitrix (компоненты, кэширование, права доступа). В вашей практике базовым ориентиром по лицензии является редакция **«Старт»** — на ней должны корректно работать решения SIMAI.

По функциональным модулям Bitrix важно разделять “платформу SF4” и “конкретное решение”:

* для большинства сценариев обязательно наличие **инфоблоков** (модуль iblock);  
* если конкретное решение использует справочники/тикеты/индексы и т.п. на HL-структурах, то требуется, чтобы в установленной конфигурации Bitrix была доступна работа с **HL-блоками** (модуль highloadblock).

Практический вывод: SF4 ориентируется на «Старт», а необходимость HL-блоков определяется функционалом конкретного решения.

# Обязательные модули SIMAI: `simai.framework` и `simai.property`

Минимальный “скелет” SF4 в проекте — это два модуля:

* `simai.framework` — платформа SF4 (ядро, инфраструктура, компоненты, мастер и т.д.);  
* `simai.property` — универсальные свойства (единый слой свойств/настроек, на который завязаны конфигурации и UI настройки).

Дополнительно в экосистеме свойств у вас используются модули расширения:

* `simai.property4field` — расширения, связанные с полями (в контексте универсальных свойств и их применения);  
* `simai.property4iblock` — расширения, связанные с инфоблоками.

В документации удобно держать акцент на “минимально необходимом наборе”: для запуска SF4 как платформы и для типового решения достаточно зафиксировать обязательные `simai.framework` \+ `simai.property`, а остальные подключать как часть конкретных сценариев (если решение реально на них опирается).

# Шаблон: `/bitrix/templates/simai.framework` и точка кастомизации

Системный шаблон `/bitrix/templates/simai.framework` — это базовая точка подключения SF4 на стороне фронтенда: общий layout, подключение ресурсов и базовая структура страницы.

Критичное правило для устойчивости обновлений: **шаблон платформы не правится напрямую**. Все изменения внешнего вида и поведения, которые относятся к проекту, размещаются в проектном слое сайта, в каталоге:

* `{site_dir}/simai.data/template`

Так вы фиксируете границу: “платформа обновляется” — “проект остаётся стабильным”.

# Данные сайта: `{site_dir}/simai.data` как единственный проектный слой

В вашем SF4 проектная конфигурация сайта живёт в `{site_dir}/simai.data`. Это слой, который переносится между средами и является “истиной проекта” (в отличие от ядра и системного шаблона).

Именно здесь обычно находятся:

* конфигурации (в том числе схемы настроек и конфиги ассетов),  
* `grid/view` (представления областей) и `grid/block` (блоки),  
* шаблонные переопределения и проектные CSS/JS,  
* include-области, модальные окна, языковые файлы, изображения,  
* значения настроек сайта и структуры (через `.site.property.php` и `.property.php` в разделах).

Такой подход напрямую связан с вашей моделью обновлений: проектные изменения остаются в `simai.data`, а платформа может обновляться без ручного “слияния правок” в ядре.

# Что проверить перед установкой, чтобы не получить “частичную” установку

Перед установкой/активацией SF4 в конкретном окружении стоит проверить короткий набор вещей, которые чаще всего становятся причиной “странного поведения”:

1. Bitrix работает в D7-режиме (ядро обновлено до версии, поддерживаемой вашим проектом).  
2. Включены необходимые модули Bitrix (минимально — инфоблоки; при необходимости — HL-блоки).  
3. Установлены и активны модули SIMAI, которые реально нужны решению (минимально `simai.framework` и `simai.property`).  
4. Для сайта выбран активный шаблон SF4 (`/bitrix/templates/simai.framework` или шаблон решения на его основе).  
5. В проекте присутствует и заполнен слой `{site_dir}/simai.data` (иначе SF4 будет “включён”, но ему не из чего собирать представления/блоки/настройки).

По PHP-версии лучше фиксировать правило без жёстких цифр: использовать версию PHP, совместимую с вашей установленной версией Bitrix и составом модулей проекта. Если нужно, этот пункт можно превратить в “проектное требование” и закрепить конкретный диапазон версий в стандарте установки ваших решений.
