# Введение (Track A)

## Назначение
Кратко объясняет, из каких подсистем состоит SIMAI 4 и где искать подтверждённую информацию для разработки решений. Основывается на «ментальной модели» из `source/file-functional.md` и описании фронтенда в `source/file-frontend.md`.

## Где применяется
Слой сайта `{site_dir}/simai.data`, ядро `/simai` (модуль `simai.framework`), системный шаблон `/bitrix/templates/simai.framework`, компоненты `/bitrix/components/simai`, мастера `/simai/wizard/action`.

## Где находится
- Ментальная модель и карта подсистем: `source/file-functional.md`.
- Фронтенд-слои и ключевые конфиги: `source/file-frontend.md`.
- Узлы и пути: `source/sf4-structure.enriched.json`, `source/structure.json`.

## Требования
- Активные модули `simai.framework` и `simai.property*` (по функциональным заметкам).
- Правки — только в `{site_dir}/simai.data`; ядро `/simai` и системный шаблон не менять (узлы enriched.json).
- Работать по кодам сущностей (блоки, свойства, компоненты), что отражено в функциональном файле.

## Как это работает
1. Ядро и подсистемы описаны в `file-functional.md` (настройки, иерархия, грид/view/block, шаблон).
2. Фронтенд подключает ассеты и компоненты, исходя из конфигов `.asset.config.php`, `.font.config.php`, `.framework.config.php` (`file-frontend.md`).
3. Структура путей подтверждается узлами в enriched.json и деревом `structure.json`.

## Настройка и параметры
| Элемент | Описание | Источник |
| --- | --- | --- |
| Система настроек | Backend читает конфиги фреймворка/сайта и собирает массив настроек | `source/file-functional.md` |
| Иерархия уровней | Сайт → Раздел → Страница → Пользователь | `source/file-functional.md` |
| Базовые фронтенд-конфиги | `.asset.config.php`, `.font.config.php`, `.framework.config.php` | `source/file-frontend.md` |
| Хранилище данных сайта | `{site_dir}/simai.data` | `source/sf4-structure.enriched.json` |

## Примеры из репозитория
Источник: `source/file-functional.md`
```md
1. **Система настроек** (backend): читает конфиги фреймворка и сайта, собирает итоговый массив настроек. 
2. **Иерархия уровней настроек**: сайт → раздел → страница → пользователь. 
3. **Шина данных (массив)**: единый массив, через который “едут” входные данные и настройки к блокам/шаблонам. 
4. **Гриды + блоки + view**: системные компоненты на базе SF4, которые связывают “что показывать” (block) и “как раскладывать” (view, left/right и т.п.).  
5. **Шаблон сайта** (Bitrix template): системный шаблон `/bitrix/templates/` → `simai.framework` (шаблон SF4) — финальная сборка страницы. 
6. **Редакторы/админка**: публичный редактор для секций/элементов инфоблоков + административные скрипты.  
```

## Типичные ошибки и диагностика
- Попытка править `/simai` или системный шаблон напрямую → переносить правки в `{site_dir}/simai.data`.
- Игнорирование уровней настроек (сайт/раздел/страница/пользователь) → свериться с функциональным файлом.
- Поиск путей без подтверждения в enriched.json → проверять узлы перед использованием.

## Что должен уметь читатель после
- Понимать подсистемы SF4 и их связи.
- Знать, где лежат конфиги и структуры для разработки решений.
- Применять иерархию настроек и работать через `{site_dir}/simai.data`.

## Источники истины
- `source/file-functional.md`
- `source/file-frontend.md`
- `source/sf4-structure.enriched.json`
